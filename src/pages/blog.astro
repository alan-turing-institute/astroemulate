---
import { getCollection } from "astro:content";
const posts = await getCollection("blog");
import background from "../assets/background.svg";
import "../styles/global.css";
import Navbar from "../components/Navbar.astro";
---

<head>
    <title>AutoEmulate Blog</title>
</head>

<div id="container">
    <img id="background" src={background.src} alt="" fetchpriority="high" />
    <main>
        <Navbar />
        <div class="intro">
            <h1>Blog posts</h1>
            <ul>
                {
                    posts.map((post) => (
                        <li>
                            <a href={post.url}>{post.data.title}</a> -{" "}
                            {post.data.pubDate}
                        </li>
                    ))
                }
            </ul>
        </div>
    </main>
</div>

<script>
    window.addEventListener("scroll", function () {
        const navbar = document.getElementById("navbar");
        if (window.scrollY > window.innerHeight / 2) {
            navbar.classList.add("hidden");
        } else {
            navbar.classList.remove("hidden");
        }
    });
</script>
